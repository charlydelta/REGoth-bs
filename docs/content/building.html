

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building from Source &mdash; REGoth  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running REGoth" href="running.html" />
    <link rel="prev" title="Welcome to REGoth’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> REGoth
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building from Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windows-using-visual-studio-code">Windows using Visual Studio Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windows-using-visual-studio">Windows using Visual Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windows-using-ninja">Windows using Ninja</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies-via-vcpkg">Dependencies via Vcpkg</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-our-own-copy-of-vcpkg">Using our own copy of Vcpkg</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-without-vcpkg">Building without Vcpkg</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-documentation">Building the Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Running REGoth</a></li>
<li class="toctree-l1"><a class="reference internal" href="setting-up-app.html">Setting up a Test-Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="world.html">World</a></li>
<li class="toctree-l1"><a class="reference internal" href="waynet.html">Waynet</a></li>
<li class="toctree-l1"><a class="reference internal" href="characters.html">Characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="create-component.html">Creating a new Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="case-study-object-kinds.html">Case-Study: Kinds of Objects in Gothic</a></li>
<li class="toctree-l1"><a class="reference internal" href="case-study-scene-structure.html">Case-Study: Scene Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="case-study-character-statemachine.html">Case-Study: Character Statemachine</a></li>
<li class="toctree-l1"><a class="reference internal" href="case-study-daedalus-vm.html">Case-Study: Daedalus VM</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-docs.html">Extending the Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">REGoth</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Building from Source</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/content/building.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-from-source">
<h1>Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h1>
<p>Make sure to do a <em>recursive</em> clone:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">--</span><span class="n">recursive</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">REGoth</span><span class="o">-</span><span class="n">project</span><span class="o">/</span><span class="n">REGoth</span><span class="o">-</span><span class="n">bs</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>If you have already cloned the repository, run this in the project root folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodule</span> <span class="n">update</span> <span class="o">--</span><span class="n">init</span> <span class="o">--</span><span class="n">recursive</span>
</pre></div>
</div>
<p>The project is built via CMake. You will need at least CMake 3.13.0.</p>
<div class="section" id="linux">
<h2>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h2>
<p>For <strong>Debian</strong> and its derivatives, install the following packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libx11</span><span class="o">-</span><span class="n">dev</span> <span class="n">libxcursor</span><span class="o">-</span><span class="n">dev</span> <span class="n">libxi</span><span class="o">-</span><span class="n">dev</span> \
                 <span class="n">libicu</span><span class="o">-</span><span class="n">dev</span> <span class="n">libgl1</span><span class="o">-</span><span class="n">mesa</span><span class="o">-</span><span class="n">dev</span> <span class="n">libglu1</span><span class="o">-</span><span class="n">mesa</span><span class="o">-</span><span class="n">dev</span> \
                 <span class="n">freeglut3</span><span class="o">-</span><span class="n">dev</span> <span class="n">libphysfs</span><span class="o">-</span><span class="n">dev</span> <span class="n">libsquish</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>For <strong>Fedora</strong> install the following packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">libX11</span><span class="o">-</span><span class="n">devel</span> <span class="n">libXcursor</span><span class="o">-</span><span class="n">devel</span> \
                 <span class="n">libXi</span><span class="o">-</span><span class="n">devel</span> <span class="n">libicu</span><span class="o">-</span><span class="n">devel</span> <span class="n">mesa</span><span class="o">-</span><span class="n">libGL</span><span class="o">-</span><span class="n">devel</span> \
                 <span class="n">mesa</span><span class="o">-</span><span class="n">libGLU</span> <span class="n">freeglut</span><span class="o">-</span><span class="n">devel</span> <span class="n">physfs</span><span class="o">-</span><span class="n">devel</span> \
                 <span class="n">libsquish</span><span class="o">-</span><span class="n">devel</span> <span class="n">libXrandr</span><span class="o">-</span><span class="n">devel</span>
</pre></div>
</div>
<p>For other distributions, just look up the corresponding package names for these
libraries (and please make a PR complementing these information).</p>
<p>To build the project for Linux, run the following commands from within the
directory where you cloned REGoth:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo ..
cmake --build . --parallel $(nproc)
</pre></div>
</div>
<p>The binaries are then put into <code class="docutils literal notranslate"><span class="pre">build/bin</span></code>.</p>
</div>
<div class="section" id="windows-using-visual-studio-code">
<h2>Windows using Visual Studio Code<a class="headerlink" href="#windows-using-visual-studio-code" title="Permalink to this headline">¶</a></h2>
<p>This is the recommended way for developing on Windows. Visual Studio Code works
really well with the CMake-files of REGoth. Just make sure to install the
official C/C++ and CMake extensions.</p>
</div>
<div class="section" id="windows-using-visual-studio">
<h2>Windows using Visual Studio<a class="headerlink" href="#windows-using-visual-studio" title="Permalink to this headline">¶</a></h2>
<p>To build the project for Windows, you need to be aware of some common pitfalls:</p>
<ol class="arabic simple">
<li><p>Always build x64, as bs:f does not support x86. To do that, make sure to use
the correct Visual-Studio-Generator.</p></li>
<li><p>Similar to <code class="docutils literal notranslate"><span class="pre">make</span></code>, Visual Studio will not do parallel builds by default.</p></li>
</ol>
<p>These are the commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">md</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">G</span><span class="s2">&quot;Visual Studio 15 2017 Win64&quot;</span> <span class="o">..</span>
<span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">config</span> <span class="n">RelWithDebInfo</span> <span class="o">--</span><span class="n">parallel</span> <span class="mi">8</span>
</pre></div>
</div>
</div>
<div class="section" id="windows-using-ninja">
<h2>Windows using Ninja<a class="headerlink" href="#windows-using-ninja" title="Permalink to this headline">¶</a></h2>
<p>The Ninja-Build System performs faster than MsBuild since it is able to run more
tasks in parallel: While MsBuild can only build different projects in parallel,
Ninja acts as you would expect and is able to build multiple files in parallel,
even if they are from within the same project.</p>
<p>Unfortunately, using it on Windows is a little bit tricky. From a <em>x64 Native
Tools Command Prompt</em>, navigate to where you cloned REGoth and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">md</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">GNinja</span> <span class="o">-</span><span class="n">DCMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">RelWithDebInfo</span> <span class="o">-</span><span class="n">DCMAKE_C_COMPILER</span><span class="o">=</span><span class="s2">&quot;cl.exe&quot;</span> <span class="o">-</span><span class="n">DCMAKE_CXX_COMPILER</span><span class="o">=</span><span class="s2">&quot;cl.exe&quot;</span> <span class="o">-</span><span class="n">DMSVC_TOOLSET_VERSION</span><span class="o">=</span><span class="mi">140</span> <span class="o">..</span>
<span class="n">ninja</span>
</pre></div>
</div>
<p>Note that Visual Studio Code seems to figure this out automatically and uses Ninja by default.</p>
</div>
<div class="section" id="dependencies-via-vcpkg">
<h2>Dependencies via Vcpkg<a class="headerlink" href="#dependencies-via-vcpkg" title="Permalink to this headline">¶</a></h2>
<p>REGoth uses Vcpkg to resolve some third-party dependencies. On configuration time, CMake will
download a copy of Vcpkg for internal use. If you don’t want that or want to use the system installed
Vcpkg, you can configure that.</p>
<div class="section" id="using-our-own-copy-of-vcpkg">
<h3>Using our own copy of Vcpkg<a class="headerlink" href="#using-our-own-copy-of-vcpkg" title="Permalink to this headline">¶</a></h3>
<p>REGoth uses <a class="reference external" href="https://github.com/microsoft/vcpkg">Vcpkg</a> internally. To make building as seamless as possible, the
build script will take care of getting a copy of Vcpkg, bootstrap it and install
the required packages. All this happens inside the <code class="docutils literal notranslate"><span class="pre">build</span></code>-directory so it
doesn’t clutter your system with stuff you don’t want.</p>
<p>If you want to use your own copy of Vcpkg, just pass the toolchain-file as usual.</p>
</div>
<div class="section" id="building-without-vcpkg">
<h3>Building without Vcpkg<a class="headerlink" href="#building-without-vcpkg" title="Permalink to this headline">¶</a></h3>
<p>If you don’t want to have anything to do with Vcpkg, you can also choose to
supply the required packages yourself. To do this, you need to pass
<code class="docutils literal notranslate"><span class="pre">-DSKIP_AUTOMATE_VCPKG=ON</span></code> to CMake. Now you’re completely on your own to gather
the required dependencies for REGoth.</p>
</div>
</div>
<div class="section" id="building-the-documentation">
<h2>Building the Documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>You will need:</p>
<ul class="simple">
<li><p>Doxygen</p></li>
<li><p>Python</p></li>
<li><p>Sphinx (install via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">sphinx</span></code>)</p></li>
<li><p>Breathe (install via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">breathe</span></code>)</p></li>
<li><p>Sphinx ReadTheDocs-Theme (install via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">sphinx_rtd_theme</span></code>)</p></li>
</ul>
<p>With a cmake-project generated, run this from within the <code class="docutils literal notranslate"><span class="pre">build</span></code>-directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">target</span> <span class="n">REGoth_docs</span>
</pre></div>
</div>
<p>This will generate the documentation as HTML into <code class="docutils literal notranslate"><span class="pre">build/docs-source/html</span></code>.
To update Github-pages, copy the contents of that directory into the <code class="docutils literal notranslate"><span class="pre">docs</span></code>
directory at the repository root.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="running.html" class="btn btn-neutral float-right" title="Running REGoth" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to REGoth’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, The REGoth-Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>